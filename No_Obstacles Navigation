void loop()
{
  GoTo (3, 1);
}


void GoTo (float x, float y) {

 
    if (y_coord < y) TurnTo(1.571);
    if (y_coord > y) TurnTo(-1.571);

  		while(abs(y_coord - y) > 0.1) { // Will move toward the wall until y_coord is met
        	ForwardDrive(10);
          y_coord = Enes100.getY();
            delay(10);
        	}
  		StopDrive();
    
    if (x_coord < x) TurnTo(0.0);
    if (x_coord > x) TurnTo(3.1416);
    StopDrive();
  		while(abs(x_coord - x) > 0.1) { // Will move toward the wall until y_coord is met
        	ForwardDrive(10);
          x_coord = Enes100.getX();
            delay(10);
        	}
  		StopDrive();
  	
    }
  
void TurnTo(float theta); 
{
  RotationTheta = Enes100.getTheta();
  float differenceTheta = RotationTheta - theta;
  if (differenceTheta < 0) TurnLeftTo(theta);
  	else if (differenceTheta > 0) TurnRightTo(theta);
}


void TurnLeftTo (float theta) { // Turning left until RotationTheta is met
   while(RotationTheta != theta) {
	RotationTheta = Enes100.getTheta();
	LeftTurn_Inplace ();
	delay(10);
	}
  StopDrive();
}

void TurnRightTo (float theta) { // Turning right until RotationTheta is met
   while(RotationTheta != theta) {
	RotationTheta = Enes100.getTheta();
	RightTurn_Inplace ();
	delay(10);
	}
  StopDrive();
}

void ForwardDrive (int speed) //drives forward, set a speed 0 to 255
{
  if (speed < 0) speed = 0;
  if (speed > 225) speed = 225; //speed cant go above 225 or below 0
  
  analogWrite(LeftEnable, speed);
  analogWrite(RightEnable, speed);
  
  digitalWrite(LeftWheel_In3, HIGH);
  digitalWrite(LeftWheel_In4, LOW);
  
  digitalWrite(RightWheel_In1, HIGH);
  digitalWrite(RightWheel_In2, LOW);  
}
